<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Ocorrência</title>
    <!-- Link para CSS (opcional) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        /* Estilos básicos diretamente aqui para simplicidade */
        body { font-family: sans-serif; margin: 20px; background-color: #f4f4f4; }
        .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
        .form-group input[type="text"],
        .form-group input[type="date"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Para incluir padding na largura */
        }
        .form-group textarea { min-height: 80px; resize: vertical; }
        .form-group-inline label { display: inline-block; margin-right: 10px; }
        .button-group { text-align: right; margin-top: 20px; }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin-left: 10px;
        }
        .btn-save { background-color: #28a745; color: white; }
        .btn-pdf { background-color: #dc3545; color: white; }
        .flash-message { padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .flash-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .flash-error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Relatório de Ocorrência</h1>

        <!-- Exibir mensagens Flash (sucesso/erro) -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('submit_report') }}">
            <div class="form-group">
                <label for="tipo">Tipo:</label>
                <select id="tipo" name="tipo" required>
                    {% for tipo_opt in tipos_ocorrencia %}
                    <option value="{{ tipo_opt }}">{{ tipo_opt }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="origem">Origem:</label>
                <input type="text" id="origem" name="origem">
            </div>
            <div class="form-group">
                <label for="data_ocorrencia">Data da ocorrência:</label>
                <input type="date" id="data_ocorrencia" name="data_ocorrencia">
            </div>
            <div class="form-group">
                <label for="unidade">Unidade:</label>
                <input type="text" id="unidade" name="unidade">
            </div>
            <div class="form-group">
                <label for="processo">Processo:</label>
                <input type="text" id="processo" name="processo">
            </div>
            <div class="form-group">
                <label for="norma">Especificação ou norma infringida:</label>
                <input type="text" id="norma" name="norma">
            </div>
            <div class="form-group">
                <label for="anexos">Foto, evidências e outros anexos:</label>
                <textarea id="anexos" name="anexos"></textarea>
            </div>

            <h2>Plano de Ação</h2>
            <div class="form-group">
                <label for="plano_acao_oque">O que fazer:</label>
                <textarea id="plano_acao_oque" name="plano_acao_oque"></textarea>
            </div>
            <div class="form-group">
                <label for="plano_acao_quem">Quem vai fazer:</label>
                <input type="text" id="plano_acao_quem" name="plano_acao_quem">
            </div>
            <div class="form-group">
                <label for="plano_acao_quando">Até quando:</label>
                <input type="date" id="plano_acao_quando" name="plano_acao_quando">
            </div>

            <div class="form-group">
                <label for="metodo_analise">Método de análise:</label>
                <textarea id="metodo_analise" name="metodo_analise"></textarea>
            </div>

            <h2>5 Porquês</h2>
            <div class="form-group">
                <label for="porque1">1. Porquê?</label>
                <input type="text" id="porque1" name="porque1">
            </div>
            <div class="form-group">
                <label for="porque2">2. Porquê?</label>
                <input type="text" id="porque2" name="porque2">
            </div>
            <div class="form-group">
                <label for="porque3">3. Porquê?</label>
                <input type="text" id="porque3" name="porque3">
            </div>
             <div class="form-group">
                <label for="porque4">4. Porquê?</label>
                <input type="text" id="porque4" name="porque4">
            </div>
             <div class="form-group">
                <label for="porque5">5. Porquê?</label>
                <input type="text" id="porque5" name="porque5">
            </div>

            <h2>Perguntas Adicionais</h2>
             <div class="form-group">
                <label for="pergunta1">Pergunta Adicional 1:</label>
                <input type="text" id="pergunta1" name="pergunta1">
            </div>
             <div class="form-group">
                <label for="pergunta2">Pergunta Adicional 2:</label>
                <input type="text" id="pergunta2" name="pergunta2">
            </div>

            <div class="form-group">
                <label for="descricao_detalhada">Descrição detalhada:</label>
                <textarea id="descricao_detalhada" name="descricao_detalhada"></textarea>
            </div>

            <h2>Plano 5W2H</h2>
            <div class="form-group">
                <label for="5w2h_what">What (o quê?):</label>
                <input type="text" id="5w2h_what" name="5w2h_what">
            </div>
            <div class="form-group">
                <label for="5w2h_why">Why (porquê?):</label>
                <input type="text" id="5w2h_why" name="5w2h_why">
            </div>
            <div class="form-group">
                <label for="5w2h_where">Where (onde?):</label>
                <input type="text" id="5w2h_where" name="5w2h_where">
            </div>
            <div class="form-group">
                <label for="5w2h_when">When (quando?):</label>
                <input type="text" id="5w2h_when" name="5w2h_when">
            </div>
            <div class="form-group">
                <label for="5w2h_who">Who (quem?):</label>
                <input type="text" id="5w2h_who" name="5w2h_who">
            </div>
            <div class="form-group">
                <label for="5w2h_how">How (como?):</label>
                <textarea id="5w2h_how" name="5w2h_how"></textarea>
            </div>
            <div class="form-group">
                <label for="5w2h_howmuch">How much (quanto?):</label>
                <input type="text" id="5w2h_howmuch" name="5w2h_howmuch">
            </div>

            <h2>Avaliação da Eficácia</h2>
             <div class="form-group">
                <label for="avaliacao_resultado">Resultado:</label>
                <input type="text" id="avaliacao_resultado" name="avaliacao_resultado">
            </div>
             <div class="form-group">
                <label for="avaliacao_descricao">Descrição:</label>
                <textarea id="avaliacao_descricao" name="avaliacao_descricao"></textarea>
            </div>
             <div class="form-group">
                <label for="avaliacao_evidencia">Evidência:</label>
                <input type="text" id="avaliacao_evidencia" name="avaliacao_evidencia">
            </div>
             <div class="form-group">
                <label for="avaliacao_data">Data da Avaliação:</label>
                <input type="date" id="avaliacao_data" name="avaliacao_data">
            </div>

            <h2>Necessidade de Atualização</h2>
             <div class="form-group form-group-inline">
                <input type="checkbox" id="atualizar_riscos" name="atualizar_riscos" value="true">
                <label for="atualizar_riscos">Atualizar riscos e oportunidades?</label>
            </div>
             <div class="form-group form-group-inline">
                 <input type="checkbox" id="mudancas_sgq" name="mudancas_sgq" value="true">
                <label for="mudancas_sgq">Mudanças no SGQ?</label>
            </div>
             <div class="form-group">
                <label for="atualizacao_onde">Onde? (Processos?):</label>
                <input type="text" id="atualizacao_onde" name="atualizacao_onde">
            </div>

            <!-- Botões de Ação -->
            <div class="button-group">
                 <button type="submit" name="action" value="pdf" class="btn-pdf">Gerar PDF</button>
                 <button type="submit" name="action" value="save" class="btn-save">Salvar Dados</button>
            </div>

        </form>
    </div>
</body>
</html>